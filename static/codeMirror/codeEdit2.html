<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <!-- Include the Codemirror library -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.32.0/codemirror.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/vue"></script>
    <!-- Codemirror JS Vue -->
    <script src="https://cdn.jsdelivr.net/npm/vue-codemirror@4.0.0/dist/vue-codemirror.js"></script>
    <!-- Codemirror Libs -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.32.0/mode/javascript/javascript.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.48.4/mode/python/python.js"></script>
<!--    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.32.0/addon/merge/merge.min.js"></script>-->
<!--    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.32.0/addon/selection/active-line.min.js"></script>-->
    <!-- Google diff match patch -->
<!--    <script>-->
<!--        window.DIFF_DELETE = -1;-->
<!--        window.DIFF_INSERT = 1;-->
<!--        window.DIFF_EQUAL = 0-->
<!--    </script>-->
    <!-- Include stylesheet -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.32.0/codemirror.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.32.0/addon/merge/merge.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.32.0/theme/monokai.min.css" rel="stylesheet">
    <script src="../vue.js"></script>
</head>
<body>
<div id="vueapp">

<div  v-for="item,i in modelTest" style="bottom: 10px">
    <local-codemirror ref="cmA"
                      v-model="item.name"
                      style="top: 50px "


                      @input="onCmInput($event,item.id)">
    </local-codemirror>
    <button>setMode</button>

    </div>
</div>

</body>
<script>
    Vue.use(VueCodemirror);
    new Vue({
        el: '#vueapp',
        data: {
            modelTest: [{id:"1",name:"this is first one"},{id:"2",name:"this is second one"}],

            code2: 'function b () {}',
            cmOption: {
                tabSize: 4,
                styleActiveLine: true,
                lineNumbers: true,
                mode: 'text/python',
            },

        },
        components: {
            LocalCodemirror: VueCodemirror.codemirror
        },
        methods: {

            onCmBlur(cm) {
                console.log('cm blur!', cm)
            },
            onCmFocus(cm) {
                console.log('cm focus!', cm)
            },
            onCmReady(cm) {
                console.log('cm ready!', cm)
            },
            onCmInput(newCode,id) {
                console.log(this.LocalCodemirror);

                console.log(newCode,id);
            }
        },
        computed: {
            // cmA() {
            //     return this.$refs.cmA.codemirror
            // },
            // cmMerge() {
            //     return this.$refs.cmMerge.codemirror
            // }
        },
        // mounted() {
        //     console.log('this is codemirror A instance object', this.cmA, 'Merge instance', this.cmMerge)
        // }
    })
</script>
</html>